<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kochi Metro Rail Limited</title>
<link rel="icon" type="x-icon" href="images/STK-20250921-WA0001.webp">
<style>
  body {font-family: Arial, sans-serif; margin:0; background:#f0f3f5; color:#1a1a1a;}
  header {background:#1976D2; color:white; padding:1rem; text-align:center; font-weight:700;}
  main {padding:16px;}
  .card {background:white; border-radius:10px; padding:16px; margin-bottom:16px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  h2 {margin-top:0; color:#1976D2;}
  table {width:100%; border-collapse:collapse; margin-top:12px;}
  th, td {padding:8px; border:1px solid #ddd; text-align:center;}
  th {background:#f1f3f4; color:#333;}
  select, input {padding:6px; border-radius:6px; border:1px solid #ccc;}
  button {padding:6px 12px; border:none; border-radius:6px; cursor:pointer; background:#1976D2; color:white; margin:2px;}
  .status-maint {color:#a00000; font-weight:700;}
  .status-clean {color:#2e7d32; font-weight:700;}
  .status-inspect {color:#0277bd; font-weight:700;}
  .status-stable {color:#fbc02d; font-weight:700;}
</style>
</head>
<body>

<header>
  KMRL Operations Management
</header>

<main>
  <div class="card">
    <h2>Daily Timetable & Train Assignment</h2>
    <table id="opsTable">
      <thead>
        <tr>
          <th>Train ID</th>
          <th>Scheduled Trip</th>
          <th>Mileage (km)</th>
          <th>Assign Trainset</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</main>

<script>
  const operationsTrains = [
    {id:'T01', trip:'06:00-08:00', mileage:28000, trainset:'', status:'Ready'},
    {id:'T02', trip:'08:15-10:15', mileage:32000, trainset:'', status:'Ready'},
    {id:'T03', trip:'10:30-12:30', mileage:41000, trainset:'', status:'Ready'},
    {id:'T04', trip:'12:45-14:45', mileage:15000, trainset:'', status:'Ready'},
    {id:'T05', trip:'15:00-17:00', mileage:36000, trainset:'', status:'Ready'},
  ];

  const trainsets = ['Trainset A','Trainset B','Trainset C','Trainset D','Trainset E'];

  function renderTable(){
    const tbody = document.querySelector('#opsTable tbody');
    tbody.innerHTML = '';
    operationsTrains.forEach((t,i)=>{
      let statusLabel = t.status;
      if(t.mileage>35000 && t.status==='Ready') statusLabel = 'Maintenance Needed';

      const trainSelect = `<select onchange="assignTrainset(${i}, this.value)">
        <option value="">Select Trainset</option>
        ${trainsets.map(ts=>`<option value="${ts}" ${t.trainset===ts?'selected':''}>${ts}</option>`).join('')}
      </select>`;

      const actions = `<button onclick="sendForCleaning(${i})">Send Cleaning</button>
                       <button onclick="sendForInspection(${i})">Send Inspection</button>
                       <button onclick="routeStabling(${i})">Route Stabling</button>
                       <button onclick="routeMaintenance(${i})">Route Maintenance</button>`;

      const statusColor = statusLabel==='Maintenance Needed'?'status-maint':
                          statusLabel==='Cleaning'?'status-clean':
                          statusLabel==='Inspection'?'status-inspect':'status-stable';

      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${t.id}</td>
                      <td>${t.trip}</td>
                      <td>${t.mileage.toLocaleString()}</td>
                      <td>${trainSelect}</td>
                      <td class="${statusColor}">${statusLabel}</td>
                      <td>${actions}</td>`;
      tbody.appendChild(tr);
    });
  }

  function assignTrainset(index, value){
    operationsTrains[index].trainset = value;
    renderTable();
  }

  function sendForCleaning(index){
    operationsTrains[index].status='Cleaning';
    alert(`${operationsTrains[index].id} sent for Cleaning`);
    renderTable();
  }

  function sendForInspection(index){
    operationsTrains[index].status='Inspection';
    alert(`${operationsTrains[index].id} sent for Inspection`);
    renderTable();
  }

  function routeStabling(index){
    operationsTrains[index].status='Stabled';
    alert(`${operationsTrains[index].id} routed to Stabling`);
    renderTable();
  }

  function routeMaintenance(index){
    operationsTrains[index].status='Maintenance';
    alert(`${operationsTrains[index].id} routed to Maintenance`);
    renderTable();
  }

  renderTable();
</script>

</body>
</html>
